<!DOCTYPE html>
<html>
  <head>
    <title>Create Seconds File</title>
    <meta charset="utf-8" />
    <style>
      body {
        background-color: #f0f0f2;
        margin: 0;
        padding: 0;
        font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
      }
      div {
        width: 800px;
        margin: 5em auto;
        padding: 0 50px 50px 50px;
        background-color: #fff;
        border-radius: 1em;
        position: relative;
      }
      textarea {
        width: 760px;
        border-radius: 0.5em;
        padding: 20px;
        margin: 100px 0 0 0;
        height: 50vh;
      }
      h1 {
        margin: 30px 0 0 0;
        position: absolute;
        float: left;
      }
      #dwn-btn {
        position: absolute;
        top: 25px;
        right: 50px;
        border-radius: 8px;
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        font-size: 16px;
        float: right;
      }
    </style>
  </head>
  <body>
    <div>
      <h1>Paste Text for the Workout</h1>
      <input type="button" id="dwn-btn" value="Download" />
      <textarea id="text-val"></textarea>
    </div>
    <script>
      function download(filename, text) {
        var element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);

        element.style.display = 'none';
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
      }

      function workoutTextToSecondsText(text) {
        const array = text.split("\n");
        let retVal = '';
        for(index in array) {
          let line = array[index];
          retVal += line.substring(17);
          retVal += "\n";
        }
        return retVal;
      }

      // Start file download.
      document.getElementById("dwn-btn").addEventListener("click", function(){
        // Generate download of hello.txt file with some content
        var text = workoutTextToSecondsText(document.getElementById("text-val").value);
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();
        var filename = mm + '_' + dd + '_' + yyyy + '_Workout.seconds';

        download(filename, text);
      }, false);
    </script>
  </body>
</html>
